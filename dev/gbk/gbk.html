<!DOCTYPE html>
<html lang="en">
<head>
    <title>twobit</title>
</head>

<body>


<label>
    Enter full URL to gbk file
    <input id="gbk-input" type="text" style="width: 800px"
           value="https://ftp.ncbi.nlm.nih.gov/genomes/archive/old_genbank/Fungi/Candida_dubliniensis_CD36_uid38659/FM992689.gbk">
</label>

<button id="load-gbk">Load gbk as genome</button>

<br>
<button id="dump-session">Dump session</button>

<div id="igvDiv" style="padding-top: 50px;padding-bottom: 20px; height: auto"></div>

<script type="module">

    import igv from "../../js/index.js"

    const igvConfig = {
        reference: {
            //gbkURL: "https://ftp.ncbi.nlm.nih.gov/genomes/archive/old_genbank/Fungi/Candida_dubliniensis_CD36_uid38659/FM992689.gbk",
            gbkURL: "../../test/data/gbk/pten_test.gbk",
            tracks: [
                {
                    name: "Annotations",
                    format: "gbk",
                    //url: "https://ftp.ncbi.nlm.nih.gov/genomes/archive/old_genbank/Fungi/Candida_dubliniensis_CD36_uid38659/FM992689.gbk"
                    url: "../../test/data/gbk/pten_test.gbk"
                }
            ]
        }
    }


    const browser = await igv.createBrowser(document.getElementById('igvDiv'), igvConfig)

    document.getElementById("load-gbk").addEventListener("click", async () => {
        await browser.loadGenome({url: document.getElementById("gbk-input").value})
    })

    document.getElementById("dump-session").addEventListener("click", () => {
        console.log(browser.toJSON())
    })

</script>

</body>

</html>
